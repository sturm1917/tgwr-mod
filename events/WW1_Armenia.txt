add_namespace = ww1_armenia

# Andranik in Zangezur
country_event = {
	id = ww1_armenia.1
	title = ww1_armenia.1.t
	desc = ww1_armenia.1.d
	picture = GFX_report_event_armenian_resistance
	fire_only_once = yes
	trigger = {
		tag = TUR
		has_global_flag = treaty_of_batum
		938 = { is_owned_by = ARM }
		939 = { is_owned_or_subject_trigger = yes }
		NOT = {
			has_war_with = ARM
		}
	}
	mean_time_to_happen = { days = 0 }
	immediate = {
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ARM
				transfer_state = 938
				set_capital = { state = 938 }
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
				set_popularities = {
					democratic = 14
					neutrality = 24
					fascism = 62
					communism = 0
				}
				set_stability = 0.7
				set_war_support = 0.9
				add_ideas = standing_alone
				add_ideas = service_by_requirement
				add_ideas = closed_economy
				add_ideas = war_economy
				set_party_name = {
					ideology = fascism
					long_name = ARM_andranik_party_long
					name = ARM_andranik_party
				}
				set_party_name = {
					ideology = neutrality
					long_name = ARM_andranik_party_long
					name = ARM_andranik_party
				}
				set_cosmetic_tag = ARM_andranik
				# reserve_dynamic_country = yes
				every_possible_country = {
					limit = {
						has_character = ARM_andranik_ozanian
					}
					ARM_andranik_ozanian = {
						set_nationality = PREV.PREV
					}
				}
				ARM_andranik_ozanian = {
					promote_leader = yes
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = revolutionary_nationalism
						}
					}
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = authoritarian_democracy
						}
					}
				}
				division_template = {
					name = "Striking Division"
					is_locked = yes
					division_names_group = ARM_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
					}
					support = {
						engineer = { x = 0 y = 0 }
					}
				}
				938 = {
					set_demilitarized_zone = no
					create_unit = {
						division = "name = \"Armenian Striking Division\" division_template = \"Striking Division\" start_experience_factor = 1 start_equipment_factor = 1"
						owner = PREV
						count = 1
						prioritize_location = 4660
						allow_spawning_on_enemy_provs = yes
					}
				}
				every_other_country = {
					limit = {
						OR = {
							tag = TUR
							is_subject_of = TUR
						}
					}
					PREV = {
						send_embargo = PREV
						add_opinion_modifier = {
							target = PREV
							modifier = HOI4TGW_Opinion_hostile_diplomatic_relations
						}
					}
				}
				TUR = {
					add_opinion_modifier = {
						target = PREV
						modifier = TUR_extermination_of_our_people
					}
				}
				AZR = {
					add_opinion_modifier = {
						target = PREV
						modifier = TUR_extermination_of_our_people
					}
				}
				diplomatic_relation = {
					country = ARM
					relation = non_aggression_pact
					active = yes
				}
				give_guarantee = ARM
			}
		}
	}
	option = {
		name = ww1_armenia.1.a
		unlock_decision_tooltip = TUR_finish_andranik
		unlock_decision_tooltip = TUR_restore_armenian_railway_control
	}
}

# Andranik Returns
country_event = {
	id = ww1_armenia.2
	title = ww1_armenia.2.t
	desc = ww1_armenia.2.d
	picture = GFX_report_event_armenian_resistance
	fire_only_once = yes
	trigger = {
		tag = ARM
		is_subject = no
		has_global_flag = great_war_ends
		TUR = { has_country_flag = great_war_loser }
		any_other_country = {
			original_tag = ARM
			has_country_leader = {
				character = ARM_andranik_ozanian
			}
			NOT = {
				has_war_with = ROOT
			}
		}
	}
	mean_time_to_happen = { days = 10 }
	option = {
		name = ww1_armenia.1.a
		random_other_country = {
			limit = {
				original_tag = ARM
				has_country_leader = {
					character = ARM_andranik_ozanian
				}
			}
			hidden_effect = {
				ARM_andranik_ozanian = {
					remove_country_leader_role = {
						ideology = revolutionary_nationalism
					}
					remove_country_leader_role = {
						ideology = authoritarian_democracy
					}
				}
				every_character = {
					set_nationality = ROOT
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = PREV
							is_claimed_by = PREV
						}
					}
					remove_core_of = PREV
					remove_claim_by = PREV
				}
				delete_unit_template_and_units = {
					division_template = "Striking Division"
					disband = yes
				}
			}
			ROOT = {
				annex_country = {
					target = PREV
					transfer_troops = yes
				}
			}
		}
	}
}