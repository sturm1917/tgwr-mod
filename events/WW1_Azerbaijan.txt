add_namespace = ww1_azerbaijan

# Baku Commune
country_event = {
	id = ww1_azerbaijan.1
	title = ww1_azerbaijan.1.t
	desc = ww1_azerbaijan.1.d
	picture = GFX_report_event_soviet_soldiers
	fire_only_once = yes
	trigger = {
		tag = AZR
		has_global_flag = russian_civil_war
		has_capitulated = no
		NOT = {
			is_subject_of = SOV
			has_government = communism
			has_global_flag = russian_civil_war_end
		}
		owns_state = 229
		any_controlled_state = {
			is_owned_by = ROOT
			NOT = { state = 229 }
		}
	}
	mean_time_to_happen = { days = 10 }
	immediate = {
		hidden_effect = {
			start_civil_war = {
				ideology = communism
				size = 0.2
				capital = 229
				states = { 229 }
				keep_unit_leaders_trigger = {
					always = yes
				}
				keep_political_leader  = yes
				PREV = {
					AZR_stepan_shaumianv = {
						set_nationality = PREV.PREV
					}
				}
				promote_character = AZR_stepan_shaumianv
				add_ideas = standing_alone	
				set_party_name = {
					ideology = communism
					long_name = BAK_communism_party
					name = BAK_communism_party
				}
				set_party_name = {
					ideology = fascism
					long_name = BAK_fascism_party
					name = BAK_fascism_party
				}
				set_party_name = {
					ideology = neutrality
					long_name = BAK_neutrality_party
					name = BAK_neutrality_party
				}
				set_cosmetic_tag = AZR_BAK_communism
				create_country_leader = {
				 	name = BAK_neutrality_party
				 	picture = "gfx/leaders/RUS/RUS_provisional_government.png"
				 	ideology = authoritarian_democracy
				}
				create_country_leader = {
				 	name = BAK_fascism_party
				 	picture = "gfx/leaders/RUS/RUS_provisional_government.png"
				 	ideology = stratocracy
				}
				add_popularity = {
					ideology = fascism
					popularity = 0.2
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.3
				}
			}
			set_state_controller = 229
			BAK = { set_province_controller = 7661 }
			if = {
				limit = {
					RUS = { has_war_with = SOV }
				}
				RUS = {
					declare_war_on = {
						target = BAK
						type = puppet_wargoal_focus
					}
				}
			}
		}
	}
	option = {
		name = ww1_azerbaijan.1.a
		effect_tooltip = {
			BAK = {
				declare_war_on = {
					target = ROOT
					type = civil_war
				}
			}
		}
	}
	option = {
		name = ww1_azerbaijan.1.b
		trigger = { is_ai = no }
		BAK = {
			effect_tooltip = {
				declare_war_on = {
					target = ROOT
					type = civil_war
				}
			}
			change_tag_from = ROOT
		}
	}
}

# Centrocaspian Dictatorship
country_event = {
	id = ww1_azerbaijan.2
	title = ww1_azerbaijan.2.t
	desc = ww1_azerbaijan.2.d
	picture = GFX_report_event_soviet_soldiers
	fire_only_once = yes
	trigger = {
		tag = BAK
		has_civil_war = yes
		is_subject = no
		has_government = communism
	}
	mean_time_to_happen = { days = 30 }
	option = {
		name = ww1_azerbaijan.2.a
		if = {
			limit = {
				RUS = {
					has_war_with = ROOT
					NOT = { has_government = communism }
				}
			}
			white_peace = RUS
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
		}	
		add_popularity = {
			ideology = neutrality
			popularity = -0.2
		}
	}
}
