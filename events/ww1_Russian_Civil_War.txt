############################
# Russian Civil War Events #
############################

add_namespace = ww1_rcw

#Orenburg Cossacks
country_event = {
	id = ww1_rcw.1
	title = ww1_rcw.1.t
	desc = ww1_rcw.1.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		owns_state = 652
	}	
	immediate = {
		hidden_effect = {
			every_owned_state = {
				limit = {
					OR = {
						state = 652
						state = 572
					}
				}
				add_core_of = ORE
				transfer_state_to = ORE
			}
			SOV = {
				country_event = {
					id = ww1_rcw.3
					days = 133
				}
				country_event = {
					id = ww1_rcw.3
					days = 158
				}
				country_event = {
					id = ww1_rcw.7
					days = 98
				}
			}
			WML = {
				add_to_faction = ORE
				add_ideas = RUS_russian_civil_war
			}
			every_possible_country = {
				limit = {
					has_character = RUS_aleksandr_dutov
				}
				RUS_aleksandr_dutov = {
					set_nationality = ORE
					add_country_leader_role ={
						promote_leader = yes
						country_leader = {
							ideology=stratocracy
						}
					}
					add_country_leader_role ={
						promote_leader = yes
						country_leader = {
							ideology=oligarchism
						}
					}
				}			
			}
			ORE = {
				load_oob = "RUS_civil_war"
				add_ideas = RUS_russian_civil_war
				inherit_technology = RUS
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
			}
			652 = {
				create_unit = {
					division = "division_template = \"White Guard Cavalry\"	start_experience_factor = 0.6	start_equipment_factor = 1"
					owner = ORE
					allow_spawning_on_enemy_provs = yes
					count = 4
				}
			}
		}
	}
	option = {
		name = ww1_rcw.1.a
		effect_tooltip = {
			release = ORE
		}
	}
	#play as komuch
	option = {
		name = ww1_rcw.1.b
		ORE = {
			change_tag_from = ROOT
		}
		trigger = {
			is_ai = no
		}
	}
}

#Czechoslovaks Revolt
country_event = {
	id = ww1_rcw.2
	title = ww1_rcw.2.t
	desc = ww1_rcw.2.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	#flavor only
	option = {
		name = ww1_rcw.2.a
	}
}

#Czechs Capture Penza and Samara + Komuch Spawns
country_event = {
	id = ww1_rcw.3
	title = ww1_rcw.3.t
	desc = ww1_rcw.3.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			every_owned_state = {
				limit = {
					OR = {
						state = 651
						state = 251
					}
				}
				transfer_state_to = KOM
			}
			every_state = {
				limit = {
					is_core_of = ROOT
				}
				add_core_of = KOM
			}
			WML = {
				add_to_faction = KOM
			}
			every_possible_country = {
				limit = {
					has_character = RUS_vladimir_kappel
				}
				RUS_vladimir_kappel = {
					add_country_leader_role ={
						country_leader = {
							ideology=stratocracy
						}
					}
					set_nationality = KOM
				}			
			}
			KOM = {
				set_faction_leader = yes
				RUS_vladimir_kappel = {
					promote_character = stratocracy
				}
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
				add_ideas = RUS_russian_civil_war
				inherit_technology = RUS
			    division_template = {
					name = "Czechoslovak Legion"
					division_names_group = RUS_INF_01
					is_locked = yes
					regiments = {
						infantry = {
							x = 0
							y = 0
						}
						infantry = {
							x = 0
							y = 1
						}
						infantry = {
							x = 0
							y = 2
						}
						infantry = {
							x = 1
							y = 0
						}
						infantry = {
							x = 1
							y = 1
						}
						infantry = {
							x = 1
							y = 2
						}
					}
					support = {
						engineer = {
							x = 0
							y = 0
						}
					}
				}
			}
			572 = {
				create_unit = {
					division = "name = \"11. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"12. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
				}
			}	
			255 = {
				create_unit = {
					division = "name = \"14. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"15. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
				}
			}
			251 = {
				create_unit = {
					division = "name = \"2. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					prioritize_location = 9365
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"3. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					prioritize_location = 11256
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.6	start_equipment_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11225
					count = 3
				}
			}
			SOV = {
				country_event = {
					id = ww1_rcw.4
					days = 26
				}
				country_event = {
					id = ww1_rcw.6
					days = 4
				}
			}
		}
	}
	option = {
		name = ww1_rcw.3.a
		effect_tooltip = {
			release = KOM
		}
	}
	#play as komuch
	option = {
		name = ww1_rcw.3.b
		KOM = {
			change_tag_from = ROOT
		}
		trigger = {
			is_ai = no
		}
	}
}

#Provisional Siberian Government + czech uprising
country_event = {
	id = ww1_rcw.4
	title = ww1_rcw.4.t
	desc = ww1_rcw.4.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			every_owned_state = {
				limit = {
					OR = {
						state = 571
						state = 573 
						state = 403
						state =	580
						state =	577
						state =	582
					}
				}
				transfer_state_to = SIB
			}
			every_state = {
				limit = {
					is_core_of = ROOT
				}
				add_core_of = SIB
			}
			WML = {
				add_to_faction = SIB
			}
			every_possible_country = {
				limit = {
					has_character = RUS_boris_annenkov
				}
				RUS_boris_annenkov = {
					set_nationality = SIB
				}		
			}
			every_possible_country = {
				limit = {
					has_character = RUS_anatoly_pepelyayev
				}
				RUS_anatoly_pepelyayev = {
					set_nationality = SIB
				}		
			}
			every_possible_country = {
				limit = {
					has_character = RUS_mikhail_diterikhs
				}
				RUS_mikhail_diterikhs = {
					set_nationality = SIB
				}		
			}
			SIB = {
				load_oob = "RUS_civil_war"
				inherit_technology = RUS
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
				country_event = {
					id = ww1_rcw.5
					days = 10
				}
				add_ideas = RUS_russian_civil_war
				set_faction_leader = yes
				country_event = {
					id = rusrevolt.29
					days = 20
				}
				set_country_flag = czechoslovak_legion
				division_template = {
					name = "Czechoslovak Legion"
					division_names_group = RUS_INF_01
					is_locked = yes
					regiments = {
						infantry = {
							x = 0
							y = 0
						}
						infantry = {
							x = 0
							y = 1
						}
						infantry = {
							x = 0
							y = 2
						}
						infantry = {
							x = 1
							y = 0
						}
						infantry = {
							x = 1
							y = 1
						}
						infantry = {
							x = 1
							y = 2
						}
					}
					support = {
						engineer = {
							x = 0
							y = 0
						}
					}
				}
				set_province_controller = 12189
				set_province_controller = 12192
				set_province_controller = 4805
				set_province_controller = 7672
				set_province_controller = 10722
				set_province_controller = 7801
				set_province_controller = 10655
				set_province_controller = 4725
				set_province_controller = 7763
				set_province_controller = 12657
				set_province_controller = 10678
				set_province_controller = 7851
				set_province_controller = 12543
				set_province_controller = 12556
				set_province_controller = 10574
				set_province_controller = 12641
				set_province_controller = 1672
				set_province_controller = 7860
				set_province_controller = 12507
				set_province_controller = 4766
				set_province_controller = 10528
				set_province_controller = 4837
				set_province_controller = 1762
				set_province_controller = 12540
				set_province_controller = 10661
				set_province_controller = 10549
				set_province_controller = 1813
				set_province_controller = 1876
				set_province_controller = 12621
				set_province_controller = 12691
				set_province_controller = 4724
				set_province_controller = 1850
				set_province_controller = 7815
				set_province_controller = 12631
				set_province_controller = 7757
				set_province_controller = 10652
				set_province_controller = 7886
				set_province_controller = 7274
				set_province_controller = 7825
				set_province_controller = 1860
				set_province_controller = 1733
				set_province_controller = 12679
			}
			571 = {
				create_unit = {
					division = "name = \"4. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SIB
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"5. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SIB
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"6. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SIB
					allow_spawning_on_enemy_provs = yes
				}
			}
			568 = {
				create_unit = {
					division = "name = \"7. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SIB
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"8. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SIB
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"9. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 0.4"
					owner = SIB
					allow_spawning_on_enemy_provs = yes
				}
			}
			566 = {
				create_unit = {
					division = "name = \"1. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SIB
					prioritize_location = 4797
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"10. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SIB
					prioritize_location = 1762
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"13. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SIB
					prioritize_location = 10549
					allow_spawning_on_enemy_provs = yes
				}
			}
			SOV = {
				add_ideas = RUS_russian_civil_war
			}
		}
	}
	option = {
		name = ww1_rcw.4.a
		effect_tooltip = {
			release = SIB
		}
	}
	option = {
		name = ww1_rcw.4.b
		SIB = {
			change_tag_from = ROOT
		}
		trigger = {
			is_ai = no
		}
	}
}

#siberian army 5th corps
country_event = {
	id = ww1_rcw.5
	title = ww1_rcw.5.t
	desc = ww1_rcw.5.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
            SIB = {
                set_province_controller = 4677
                set_province_controller = 7725
                set_province_controller = 12622
                set_province_controller = 4719
            }
			CER = {
				# transfer_state = 908
				# transfer_state = 909
				remove_ideas = standing_alone
			}
			563 = {
				create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
					owner = SIB
                    prioritize_location = 4677
					allow_spawning_on_enemy_provs = yes
					count = 2
					country_score = {
						base = 100
					}
				}
                create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
					owner = SIB
                    prioritize_location = 7725
					allow_spawning_on_enemy_provs = yes
					count = 2
					country_score = {
						base = 100
					}
				}
                create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
					owner = SIB
                    prioritize_location = 12622
					allow_spawning_on_enemy_provs = yes
					count = 1
					country_score = {
						base = 100
					}
				}
			}
		}
	}
	option = {
		name = ww1_rcw.5.a
	}
}

# ALASH RELEASED
###################
country_event = {
	id = ww1_rcw.6
	title = ww1_rcw.6.t
	desc = ww1_rcw.6.d
	picture = GFX_report_event_generic_military_parade
	is_triggered_only = yes
	# trigger = {
	# 	KAZ = {
	# 		exists = no
	# 	}
	# 	any_owned_state = {
	# 		NOT = {
	# 			state = 590
	# 			state = 587
	# 		}
	# 		is_core_of = KAZ
	# 	}
	# }
	immediate = {
		hidden_effect = {
			every_owned_state = {
				limit = {
					NOT = {
						state = 590
						state = 587
						state = 407
						state = 571
						state = 573
					}
					is_core_of = KAZ
				}
				transfer_state_to = KAZ
			}
			KAZ = {
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
				add_ideas = RUS_russian_civil_war
				set_cosmetic_tag = KAZ_alash
				set_province_name = {
					id = 4661
					name = ALASH_PROV
				}
				load_oob = "KAZ_1918"
				inherit_technology = RUS
				set_politics = {
					ruling_party = democratic
					elections_allowed = no 
				}	
				set_popularities = {
					fascism = 2
					communism = 29
					democratic = 33
					neutrality = 36
				}	
			}
			WML = {
				add_to_faction = KAZ
			}
			set_global_flag = alash_released
		}
	}
	option = {
		name = ww1_rcw.6.a
		effect_tooltip = {
			release = KAZ
		}
	}
	option = {
		name = ww1_rcw.5.b
		KAZ = {
			change_tag_from = ROOT
		}
		trigger = {
			is_ai = no
		}
	}
}
#Ural cossacks
country_event = {
	id = ww1_rcw.7
	title = ww1_rcw.7.t
	desc = ww1_rcw.7.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		owns_state = 407
	}	
	immediate = {
		hidden_effect = {
			407 = {
				add_core_of = UCH
				transfer_state_to = UCH
			}
			WML = {
				add_to_faction = UCH
				add_ideas = RUS_russian_civil_war
			}
			UCH = {
				load_oob = "RUS_civil_war"
				add_ideas = RUS_russian_civil_war
				inherit_technology = RUS
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
			}
			407 = {
				create_unit = {
					division = "division_template = \"White Guard Cavalry\"	start_experience_factor = 0.6	start_equipment_factor = 1"
					owner = UCH
					allow_spawning_on_enemy_provs = yes
					count = 4
					country_score = {
						base = 100
					}
				}
			}
		}
	}
	option = {
		name = ww1_rcw.7.a
		effect_tooltip = {
			release = UCH
		}
	}
	#play as komuch
	option = {
		name = ww1_rcw.7.b
		UCH = {
			change_tag_from = ROOT
		}
		trigger = {
			is_ai = no
		}
	}
}
#Transbaikal
country_event = {
	id = ww1_rcw.8
	title = ww1_rcw.8.t
	desc = ww1_rcw.8.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		tag = SIB
		controls_state = 564
		controls_state = 563
		SOV = {
			owns_state = 564
			controls_state = 563
		}
	}	
	immediate = {
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 564
						state = 563
					}
				}
				add_core_of = TBK
				transfer_state_to = TBK
			}
			WML = {
				add_to_faction = TBK
			}			
			every_possible_country = {
				limit = {
					has_character = RUS_grigory_semyonov
				}
				RUS_grigory_semyonov = {
					set_nationality = TBK
					add_country_leader_role ={
						promote_leader = yes
						country_leader = {
							ideology=stratocracy
						}
					}
					add_country_leader_role ={
						promote_leader = yes
						country_leader = {
							ideology=despotism
						}
					}
				}			
			}
			every_possible_country = {
				limit = {
					has_character = RUS_roman_ungern_sternberg
				}
				RUS_roman_ungern_sternberg = {
					set_nationality = TBK					
				}			
			}
			TBK = {
				load_oob = "RUS_civil_war"
				add_ideas = RUS_russian_civil_war
				inherit_technology = RUS
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
			}
		}
	}
	option = {
		name = ww1_rcw.8.a
		effect_tooltip = {
			release = TBK
		}
	}
	#play as komuch
	option = {
		name = ww1_rcw.8.b
		TBK = {
			change_tag_from = ROOT
		}
		trigger = {
			is_ai = no
		}
	}
}
#Ural republic
country_event = {
	id = ww1_rcw.9
	title = ww1_rcw.9.t
	desc = ww1_rcw.9.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		OR = {
			tag = SIB
			tag = KOM
		}
		controls_state = 653
		SOV = {
			owns_state = 653
		}	
	}
	immediate = {
		hidden_effect = {
			653= {
				add_core_of = URA
				transfer_state_to = URA
			}
			398 = {
				add_core_of = URA
			}
			WML = {
				add_to_faction = URA
				add_ideas = RUS_russian_civil_war
			}
			#later 
			# every_possible_country = {
			# 	limit = {
			# 		has_character = RUS_aleksandr_dutov
			# 	}
			# 	RUS_aleksandr_dutov = {
			# 		set_nationality = ORE
			# 		add_country_leader_role ={
			# 			promote_leader = yes
			# 			country_leader = {
			# 				ideology=stratocracy
			# 			}
			# 		}
			# 		add_country_leader_role ={
			# 			promote_leader = yes
			# 			country_leader = {
			# 				ideology=oligarchism
			# 			}
			# 		}
			# 	}			
			# }
			URA = {
				load_oob = "RUS_civil_war"
				add_ideas = RUS_russian_civil_war
				inherit_technology = RUS
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
			}
			407 = {
				create_unit = {
					division = "division_template = \"White Guard Cavalry\"	start_experience_factor = 0.6	start_equipment_factor = 1"
					owner = URA
					allow_spawning_on_enemy_provs = yes
					count = 2
					country_score = {
						base = 100
					}
				}
			}
		}
	}
	option = {
		name = ww1_rcw.9.a
		effect_tooltip = {
			release = URA
		}
	}
	#play as komuch
	option = {
		name = ww1_rcw.9.b
		URA = {
			change_tag_from = ROOT
		}
		trigger = {
			is_ai = no
		}
	}
}
