peace_deals = {
	SOV_sue_for_peace_POL = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			original_tag = RUS 
		}
		visible = {
			tag = SOV
		}
		target_trigger = {
			FROM = {
				tag = POL
				is_subject = no
				has_war_with = ROOT
			}
		}
		available = {
			surrender_progress > 0.05
		}
		visible = {
			is_subject = no
			NOT = { has_global_flag = soviet_polish_war_truce }
		}
		cost = 0
		fire_only_once = yes
		ai_will_do = {
			base = 0
			# historical peace
			modifier = {
				add = 1000
				FROM = {
					controls_state = 97
					controls_state = 773
					controls_state = 808
					controls_state = 766
					controls_state = 93
					controls_state = 94
					controls_state = 95
				}
				casualties_inflicted_by = {
					opponent = FROM
					thousands > 60
				}
			}
			# deep into ukraine
			modifier = {
				add = 100
				FROM = {
					controls_state = 766
					controls_state = 93
					controls_state = 201
				}
			}
			modifier = {
				add = 100
				UKR = {
					is_subject_of = ROOT
					has_capitulated = yes
				}
			}
			# deep into belarus
			modifier = {
				add = 100
				FROM = {
					controls_state = 773
					controls_state = 95
					controls_state = 206
				}
			}
			modifier = {
				add = 100
				BLR = {
					is_subject_of = ROOT
					has_capitulated = yes
				}
			}
			# massive casualties
			modifier = {
				add = 100
				casualties_inflicted_by = {
					opponent = FROM
					thousands > 80
				}
			}
			# no condition to defend west front
			modifier = {
				add = 1000
				any_enemy_country = {
					NOT = { tag = FROM }
				}
				surrender_progress > 0.25
			}
			# damned
			modifier = {
				add = 1000
				surrender_progress > 0.30
			}
		}
		complete_effect = {
			set_global_flag = soviet_polish_war_truce
			POL = {
				country_event = { id = ww1_soviet.20 } #Советы отступают.
			}
		}
	}
	SOV_sue_for_peace_POL_GREATER = {	
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			original_tag = RUS 
		}
		visible = {
			tag = SOV
		}
		target_trigger = {
			FROM = {
				tag = POL
				is_subject = no
				has_war_with = ROOT
			}
		}
		available = {
			surrender_progress > 0.05
		}
		visible = {
			is_subject = no
			has_global_flag = soviet_polish_war_truce
		}
		cost = 0
		fire_only_once = yes
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				surrender_progress > 0.50
			}
		}
		complete_effect = {
			POL = {
				country_event = { id = ww1_soviet.46 }
			}
		}
	}
	SOV_sue_for_peace_VLN = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			original_tag = RUS 
		}
		visible = {
			tag = SOV
		}
		target_trigger = {
			FROM = {
				tag = VLN
			}
		}
		available = {
			OR = {
				surrender_progress > 0.3
				any_country = {
					original_tag = UKR
					is_subject_of = PREV
					has_capitulated = yes
				}
			}
		}
		visible = {
			is_subject = no
			has_war_with = VLN
			VLN = {
				is_subject = no
				is_in_faction = no
			}
		}
		cost = 0
		fire_only_once = yes
		ai_will_do = {
			factor = 10
		}
		complete_effect = {
			set_country_flag = SOV_sue_for_peace_VLN
			VLN = {
				country_event = { id = ww1_soviet.33 }
			}
		}
	}
	SOV_sue_for_peace_EST = {	
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			original_tag = RUS 
		}
		visible = {
			tag = SOV
		}
		target_trigger = {
			FROM = {
				tag = EST
			}
		}
		available = {
			is_subject = no
			FROM = { is_subject = no }
		}
		visible = {
			is_subject = no
			FROM = {
				has_war_with = ROOT
				is_subject = no
			}
		}
		cost = 0
		fire_only_once = yes
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				surrender_progress > 0.25
				FROM = { surrender_progress < 0.10 }
			}
			modifier = {
				add = 100
				casualties_inflicted_by = {
					opponent = FROM
					thousands > 10
				}
				# FROM = {
				# 	surrender_progress < 0.10
				# }
			}
			modifier = {
				add = 100
				FROM = {
					OR = {
						controls_state = 209
						controls_state = 925
						controls_state = 926
					}
				}
			}
		}
		complete_effect = {
			every_country = {
				limit = {
					has_war_with = FROM
					OR = {
						tag = PREV
						is_in_faction_with = PREV
						is_subject_of = PREV
					}
				}
				white_peace = FROM
				set_truce = {
					target = FROM
					days = 365
				}
			}
			every_state = {
				limit = {
					is_core_of = FROM
					owner = {
						is_russian_tag = yes
					}
				}
				transfer_state_to = FROM
			}
			FROM = {
				if = {
					limit = {
						is_in_faction = yes
					}
					leave_faction = yes
				}
				set_rule = {
					can_join_factions = no
				}
				every_owned_state = {
					limit = {
						region = 37
					}
					remove_russian_cores = yes
					remove_russian_claims = yes
				}
			}
		}
	}
	
	SOV_sue_for_peace_LAT = {	
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			original_tag = RUS 
		}
		visible = {
			tag = SOV
		}
		target_trigger = {
			FROM = {
				tag = LAT
			}
		}
		available = {
			is_subject = no
			LAT = { is_subject = no }
		}
		visible = {
			is_subject = no
			FROM = {
				has_war_with = ROOT
				is_subject = no
			}
		}
		cost = 0
		fire_only_once = yes
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				surrender_progress > 0.25
				FROM = { surrender_progress < 0.10 }
			}
			modifier = {
				add = 100
				casualties_inflicted_by = {
					opponent = FROM
					thousands > 10
				}
				# FROM = {
				# 	surrender_progress < 0.10
				# }
			}
			modifier = {
				add = 100
				FROM = {
					OR = {
						controls_state = 96
						controls_state = 947
					}
				}
			}
		}
		complete_effect = {
			every_country = {
				limit = {
					has_war_with = FROM
					OR = {
						tag = PREV
						is_in_faction_with = PREV
						is_subject_of = PREV
					}
				}
				white_peace = FROM
				set_truce = {
					target = FROM
					days = 365
				}
			}
			every_state = {
				limit = {
					is_core_of = FROM
					owner = {
						is_russian_tag = yes
					}
				}
				transfer_state_to = FROM
			}
			FROM = {
				if = {
					limit = {
						is_in_faction = yes
					}
					leave_faction = yes
				}
				set_rule = {
					can_join_factions = no
				}
				every_owned_state = {
					limit = {
						region = 37
					}
					remove_russian_cores = yes
					remove_russian_claims = yes
				}
			}

			#baltic germans
			if = {
				limit = { country_exists = UBD }
				every_country = {
					limit = {
						has_war_with = UBD
						OR = {
							tag = PREV
							is_in_faction_with = PREV
							is_subject_of = PREV
						}
					}
					white_peace = UBD
					set_truce = {
						target = UBD
						days = 365
					}
				}
			}
		}
	}
	
	SOV_sue_for_peace_LIT = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			original_tag = RUS 
		}
		visible = {
			tag = SOV
		}
		target_trigger = {
			FROM = {
				tag = LIT
			}
		}
		available = {
			is_subject = no
			LIT = { is_subject = no }
		}
		visible = {
			is_subject = no
			FROM = {
				has_war_with = ROOT
				is_subject = no
			}
		}
		cost = 0
		fire_only_once = yes
		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				surrender_progress > 0.25
				FROM = { surrender_progress < 0.10 }
			}
			modifier = {
				add = 100
				casualties_inflicted_by = {
					opponent = FROM
					thousands > 10
				}
				# FROM = {
				# 	surrender_progress < 0.10
				# }
			}
			modifier = {
				add = 100
				NOT = { is_neighbor_of = FROM }
				FROM = {
					all_neighbor_country = {
						NOT = {
							is_in_faction_with = ROOT
							has_war_with = PREV
							has_war_with = ROOT
						}
					}
				}
			}
			modifier = {
				add = 100
				FROM = {
					OR = {
						controls_state = 206
						controls_state = 207
						controls_state = 243
						controls_state = 242
					}
				}
			}
		}
		complete_effect = {
			every_country = {
				limit = {
					has_war_with = FROM
					OR = {
						tag = PREV
						is_in_faction_with = PREV
						is_subject_of = PREV
					}
				}
				white_peace = FROM
				set_truce = {
					target = FROM
					days = 365
				}
			}
			every_state = {
				limit = {
					is_core_of = FROM
					owner = {
						is_russian_tag = yes
					}
				}
				transfer_state_to = FROM
			}
			FROM = {
				if = {
					limit = {
						is_in_faction = yes
					}
					leave_faction = yes
				}
				set_rule = {
					can_join_factions = no
				}
				every_owned_state = {
					limit = {
						region = 37
					}
					remove_russian_cores = yes
					remove_russian_claims = yes
				}
			}
		}
	}
}
crisis = {
	# SOV_german_offensive_mission = {
	# 	icon = generic_ignite_civil_war		
	# 	allowed = {
	# 		original_tag = RUS 
	# 	}
	# 	visible = {
	# 		tag = SOV
	# 		any_other_country = {
	# 			original_tag = RUS
	# 			has_war_with = RUS
	# 		}
	# 		GER = { has_war_with = RUS }
	# 	}		
	# 	available = {
	# 		OR = {
	# 			has_war_with = GER
	# 			has_completed_focus = SOV_decree_on_peace
	# 			has_global_flag = GER_capitulation
	# 		}
	# 	}		
	# 	activation = {
	# 		tag = SOV
	# 		any_other_country = {
	# 			original_tag = RUS
	# 			has_war_with = RUS
	# 		}
	# 		GER = { has_war_with = RUS }
	# 	}		
	# 	timeout_effect = {
	# 		GER = { country_event = { id = ww1_germany.25 } }
	# 	}		
	# 	fire_only_once = yes
	# 	days_mission_timeout = 210
	# 	is_good = no
	# }
	# GER_german_offensive_mission = {	
	# 	icon = generic_ignite_civil_war		
	# 	allowed = {
	# 		original_tag = GER
	# 	}
	# 	visible = {
	# 		original_tag = GER
	# 		has_war_with = RUS
	# 		ROOT = { has_war_with = RUS }
	# 	}		
	# 	available = {
	# 		OR = {
	# 			has_war_with = ROOT
	# 			NOT = { has_war_with = FRA }
	# 			ROOT = { has_completed_focus = SOV_decree_on_peace }
	# 			has_global_flag = russia_ask_for_brest_litovsk
	# 		}
	# 	}
	# 	activation = {
	# 		has_war_with = RUS
	# 		ROOT = { has_war_with = RUS }
	# 	}	
	# 	timeout_effect = {
	# 		custom_effect_tooltip = GER_german_offensive_mission_tt
	# 	}		
	# 	fire_only_once = yes
	# 	days_mission_timeout = 210
	# 	is_good = yes
	# }
}
SOV_combat_the_counter_revolution = {
	SOV_overthrow_CER_administration = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			FROM = {
				has_idea = CER_harbin_soviet
			}
		}
		visible = {
			has_completed_focus = SOV_combat_the_counter_revolution
			FROM = {
				is_subject = no
				NOT = {
					has_government = communism
				}
			}
		}
		target_trigger = {
			FROM = { tag = CER }
		}
		cost = 20
		ai_will_do = {
			base = 10000
		}
		fire_only_once = yes
		days_remove = 15
		remove_effect  = {
			FROM = {
				country_event = ww1_cer_rcw.1
			}
		}
	}
	SOV_send_ultimatum_to_Turkestan = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			is_neighbor_of = FROM
		}
		visible = {
			has_completed_focus = SOV_combat_the_counter_revolution
			FROM = {
				is_subject = no
				NOT = {
					has_government = communism
				}
			}
		}
		target_trigger = {
			FROM = { tag = TRK }
		}
		cost = 20
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		days_remove = 15
		remove_effect  = {
			FROM = {
				country_event = ww1_turkestan.2
			}
		}
	}
	SOV_crush_FROM_cossacks = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			is_neighbor_of = FROM
		}
		visible = {
			has_completed_focus = SOV_combat_the_counter_revolution
			FROM = {
				is_subject = no
				is_in_faction = no
				NOT = {
					has_government = communism
					has_war_with = ROOT
				}
			}
		}
		target_trigger = {
			FROM = { is_cossack_tag = yes }
		}
		cost = 20
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		days_remove = 15
		remove_effect  = {
			declare_war_on = {
				target = FROM
				type = civil_war
			}
			hidden_effect = {
				FROM = {
					add_ideas = RUS_russian_civil_war
				}	
			}
		}
	}
	SOV_crush_VLN = {
		icon = GFX_decision_generic_prepare_civil_war
		allowed = {
			original_tag = RUS 
		}
		visible = {
			tag = SOV
		}
		target_trigger = {
			FROM = {
				tag = VLN
			}
		}
		available = {
			OR = {
				is_neighbor_of = FROM
				any_other_country = {
					is_neighbor_of = FROM
					OR = {
						is_in_faction_with = ROOT
						is_subject_of = ROOT
					}
				}
			}
			FROM = {
				all_neighbor_country = {
					NOT = { has_war_with = ROOT }
				}
			}
		}
		visible = {
			is_subject = no
			FROM = {
				NOT = {
					has_war_with = ROOT
					has_war_together_with = ROOT
				}
			}
			NOT = { has_country_flag = SOV_sue_for_peace_VLN }
		}
		cost = 25
		fire_only_once = no
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				surrender_progress > 0.2
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = yes
					NOT = { is_in_faction_with = ROOT }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					NOT = { is_subject_of = ROOT }
				}
			}
		}
		complete_effect = {
			if = {
				limit = {
					has_subject = FROM
				}
				if = {
					limit = {
						any_other_country = {
							OR = {
								is_in_faction_with = ROOT
								is_subject_of = ROOT
							}
							FROM = {
								capital_scope = {
									is_core_of = PREV.PREV
								}
							}
						}
					}
					random_other_country = {
						limit = {
							OR = {
								is_in_faction_with = ROOT
								is_subject_of = ROOT
							}
							FROM = {
								capital_scope = {
									is_core_of = PREV.PREV
								}
							}
						}
						annex_country = {
							target = FROM
						}
					}
				}
				else = {
					annex_country = {
						target = FROM
					}
				}
			}
			else = {
				hidden_effect = {
					if = {
						limit = {
							is_in_faction_with = FROM
						}
						FROM = { leave_faction = yes }
					}
				}
				declare_war_on = {
					target = FROM
					type = puppet_wargoal_focus
				}
			}
		}
	}
}
SOV_decision_soviet_republics = {
	SOV_soviet_stavrapol = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			has_government = communism
		}
		visible = {
			NOT = { country_exists = STV }
			owns_state = 235
		}
		cost = 5
		ai_will_do = {
			base = 200
		}
		fire_only_once = yes
		complete_effect = {
			create_dynamic_country = {
				original_tag = RUS
				copy_tag = SOV
				add_political_power = 100
				transfer_state = 235
				load_focus_tree = empty_focus
				country_lock_all_division_template = yes
				SOV = {
					puppet = PREV
				}
				set_politics = {
					ruling_party = communism
					long_name = SOV_communism_party_long
					name = SOV_communism_party
					elections_allowed = no
				}
				set_popularities = {
					communism = 55
					democratic = 45
				}
				set_party_name = {
					ideology = democratic
					long_name = RUS_democratic_party_SR_long
					name = RUS_democratic_party_SR
				}
				set_country_flag = RUS_stavropol_tag
				set_cosmetic_tag = STV_communism
				add_ideas = SOV_idea_red_guard
				set_country_flag = dont_trigger_political_event
				create_country_leader = {
					name = SOV_aleksandr_ponomarev
					picture = GFX_Portrait_Soviet_Generic_land_2
					ideology = vanguardism
				}
				division_template = {
					name = "Krasnaya Gvardiya"
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 0 }
					}
				}
				235 = {
					create_unit = {
						division = "division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.2" 
						owner = PREV
						allow_spawning_on_enemy_provs = yes
						count = 2
					}
				}
				every_state = {
					limit = {
						is_claimed_by = PREV
					}
					remove_claim_by = PREV
				}
				every_state = {
					limit = {
						is_core_of = PREV
						NOT = {
							state = 235
						}	
					}
					remove_core_of = PREV
				}
			}
			235 = {
				remove_core_of = SOV
			}
		}
	}
	SOV_soviet_terek = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			has_government = communism
		}
		visible = {
			NOT = { country_exists = TER }
			owns_state = 232
		}
		cost = 5
		ai_will_do = {
			base = 200
		}
		fire_only_once = yes
		complete_effect = {
			TER = {
				transfer_state = 232
				add_state_core = 232
				SOV = {
					puppet = PREV
				}
				retire_character = TER_mikhail_karaulov
				set_politics = {
					ruling_party = communism
				}
				set_popularities = {
					communism = 33
					democratic = 26
					neutrality = 31
					fascism = 10
				}
				add_ideas = SOV_idea_red_guard
				set_country_flag = dont_trigger_political_event
				load_focus_tree = empty_focus
				add_ideas = SOV_idea_red_guard
				country_lock_all_division_template = yes
				division_template = {
					name = "Krasnaya Gvardiya"
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 0 }
					}
				}
				232 = {
					create_unit = {
						division = "division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.2" 
						owner = PREV
						allow_spawning_on_enemy_provs = yes
						count = 4
					}
				}
			}
		}
	}
	SOV_soviet_black_sea = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			has_government = communism
		}
		visible = {
			NOT = { country_exists = BSR }
			OR = {
				owns_state = 233
				owns_state = 940
			}	
		}
		cost = 5
		ai_will_do = {
			base = 200
		}
		fire_only_once = yes
		complete_effect = {
			every_state = {
				limit = {
					OWNER = { is_russian_tag = yes }
					OR = {
						state = 233
						state = 940
					}						
				}	
				transfer_state_to = BSR
				add_core_of = BSR
			}	
			BSR = {
				division_template = {
					name = "Krasnaya Gvardiya"
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
							militia = { x = 1 y = 0 }
					}
				}
				940 = {
					create_unit = {
						division = "division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.2" 
						owner = BSR
						allow_spawning_on_enemy_provs = yes
						count = 3
					}
				}
			}
			SOV = {
				puppet = BSR
				add_to_faction = BSR
			}
		}
	}
	SOV_soviet_kuban_black_sea = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			has_government = communism
		}
		target_trigger = {
			FROM = {
				tag = KUB
				NOT = {
					tag = BSR
				}
			}
		}
		visible = {
			has_subject = KUB
			has_subject = BSR
		}
		cost = 5
		ai_will_do = {
			base = 200
		}
		fire_only_once = yes
		complete_effect = {
			KUB = {
				annex_country = {
					target = BSR
					transfer_troops = yes
				}
				every_state = {
					limit = {
						is_core_of = BSR
					}
					add_core_of = KUB
					remove_core_of = BSR
				}
				set_cosmetic_tag = KUB_black_sea_communism
			}
		}
	}	
	SOV_soviet_north_caucasus = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			has_government = communism
		}
		target_trigger = {
			FROM = {
				tag = KUB
				has_cosmetic_tag = KUB_black_sea_communism
			}
		}
		cost = 5
		ai_will_do = {
			base = 200
		}
		fire_only_once = yes
		complete_effect = {
			KUB = {
				annex_country = {
					target = TER
					transfer_troops = yes
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = RUS_stavropol_tag
						}
					}
					annex_country = {
						target = STV
						transfer_troops = yes
					}
				}	
				set_cosmetic_tag = KUB_north_caucasus_communism
				create_country_leader = {
					name = SOV_abram_rubin
					picture = "gfx/leaders/SOV/Portrait_Soviet_Generic_1.dds"
					ideology = vanguardism
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = STV
							is_core_of = TER				
						}
						NOT = {
							is_core_of = KUB
						}
					}
					add_core_of = KUB
					remove_core_of = STV
				}		
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 232
						state = 235
						state = 579
						state = 233
						state = 940
						state = 234
						state = 941
					}
				}
				transfer_state_to = KUB
				if = {
					limit = {
						NOT = {
							is_core_of = KUB
						}
					}
					add_core_of = KUB
				}
			}
		}
	}
	SOV_annex_soviet_north_caucasus = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			is_subject = no
			has_government = communism
			OR = {
				has_war = no
				FROM = {
					has_capitulated = yes
				}
			}		
		}
		target_trigger = {
			FROM = {
				tag = KUB
				has_cosmetic_tag = KUB_north_caucasus_communism
				is_subject_of = ROOT
			}
		}
		cost = 5
		ai_will_do = {
			base = 200
		}
		fire_only_once = yes
		complete_effect = {
			FROM = {
				every_state = {
					limit = {
						is_core_of = FROM
						NOT = {
							is_core_of = ROOT
						}
					}
					add_core_of = ROOT
				}				
				every_state = {
					limit = {
						NOT = {
							state = 234
							state = 941
							state = 579
							state = 940
						}
					}
					remove_core_of = PREV
				}
				drop_cosmetic_tag = yes
			}
			ROOT = {
				annex_country = {
					target = FROM
					transfer_troops = yes
				}
			}
		}
	}
	SOV_kirghiz_assr = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			any_state = {
				is_core_of = KAZ
				NOT = {is_core_of = ROOT}
				is_fully_controlled_by = ROOT
    		}
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		cost = 20
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		days_remove = 15
		remove_effect  = {
			every_state = {
				limit = {
					is_core_of = KAZ
					NOT = {is_core_of = ROOT}
				}
				ROOT = {
 			        add_state_core = PREV
				}
    		}
		}
	}
	SOV_soviet_belarus = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			OR = {
				has_government = democratic
				has_government = communism
			}
			has_global_flag = great_war_ends
		}
		visible = {
			NOT = { country_exists = BLR }
			any_owned_state = {
				is_core_of = BLR
			}
		}
		cost = 25
		ai_will_do = {
			base = 200
			modifier = {
				factor = 1000
				OR = {
					has_war_with = LIT
					has_war_with = LAT
					has_war_with = EST
					has_war_with = UKR
				}
			}
		}
		fire_only_once = yes
		complete_effect = {
			every_owned_state = {
				limit = {
					OR = {
						state = 94
						state = 95
						state = 97
						state = 194
						state = 206
						state = 773
						state = 808
					}
				}
				transfer_state_to = BLR
			}
			puppet = BLR
		}
		# icon = GFX_decision_SOV_secure_the_administration
		# available = {
		# 	has_completed_focus = SOV_soviet_republics
		# 	is_subject = no
		# 	FROM = {
		# 		has_capitulated = no
		# 		has_civil_war = no
		# 		is_neighbor_of = ROOT
		# 		# You can't just invade them ingnoring the Germans
		# 		if = {
		# 			limit = {
		# 				has_global_flag = brest_litovsk
		# 				NOT = { has_government = communism }
		# 			}
		# 			GER = {
		# 				OR = {
		# 					exists = no
		# 					has_government = communism
		# 					has_country_flag = great_war_loser
		# 				}
		# 				NOT = { has_guaranteed = PREV }
		# 			}
		# 		}
		# 	}
		# 	OR = {
		# 		has_government = democratic
		# 		has_government = communism
		# 	}
		# }
		# target_trigger = {
		# 	FROM = {
		# 		tag = BLR
		# 		is_subject = no
		# 	}
		# }
		# cost = 25
		# ai_will_do = {
		# 	base = 200
		# 	modifier = {
		# 		factor = 0
		# 		FROM = {
		# 			OR = {
		# 				has_government = ROOT
		# 				is_in_faction = no
		# 			}
		# 			NOT = {
		# 				is_in_faction_with = ROOT
		# 				has_war_with = POL
		# 				GER = { has_country_flag = great_war_loser }
		# 			}
		# 			has_war = yes
		# 		}
		# 	}
		# 	modifier = {
		# 		add = 1000
		# 		FROM = {
		# 			POL = {
		# 				has_war_with = PREV
		# 				NOT = { is_in_faction_with = ROOT }
		# 			}
		# 		}
		# 	}
		# }
		# fire_only_once = yes
		# complete_effect = {
		# 	if = {
		# 		limit = {
		# 			BLR = {
		# 				OR = { 
		# 					has_government = ROOT
		# 					is_in_faction_with = ROOT
		# 					is_in_faction = no
		# 				} 
		# 			}
		# 		}
		# 		puppet = BLR
		# 		every_state = {
		# 			limit = {
		# 				is_owned_by = BLR
		# 				is_core_of = ROOT
		# 				NOT = {
		# 					is_core_of = BLR
		# 				}
		# 			}
		# 			transfer_state_to = ROOT
		# 		}
		# 		else = {
		# 			BLR = {
		# 				start_civil_war = { 
		# 					ideology = ROOT 
		# 					size = 0.45 
		# 					states = {
		# 						206
		# 					}
		# 					keep_unit_leaders_trigger = {
		# 						always = yes
		# 					}
		# 				}
		# 				random_other_country = {
		# 					limit = {
		# 						original_tag = BLR
		# 						has_government = ROOT
		# 					}
		# 					ROOT = {
		# 						puppet = PREV
		# 						every_owned_state = {
		# 							limit = {
		# 								is_core_of = PREV
		# 							}
		# 							set_state_owner_to = PREV
		# 						}
		# 					}
		# 					declare_war_on = {
		# 						target = BLR
		# 						type = civil_war
		# 					}
		# 				}
		# 			}
		# 		}
		# 	}	
		# }
	}
	SOV_soviet_ukraine = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = UKR
			is_subject = no
			UKR = {
				has_civil_war = no
				has_capitulated = no
				NOT = { has_war_with = PREV }
			}
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		target_trigger = {
			FROM = {
				tag = UKR
				is_subject = no
			}
		}
		cost = 25
		ai_will_do = {
			base = 200
			modifier = {
				factor = 0
				GER = { has_war_with = RUS }
			}
			modifier = {
				factor = 0
				UKR = {
					is_in_faction_with = GER
					NOT = {
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}
			}
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					NOT = { UKR = {	has_government = ROOT } }
					NOT = { UKR = { is_in_faction_with = ROOT } }
					UKR = { has_civil_war = no }
				}
				UKR = {
					hidden_effect = {
						promote_character = UKR_yuriy_pyatakov
						set_global_flag = ukrainian_civil_war
					}
					start_civil_war = { 
						ideology = ROOT 
						set_cosmetic_tag = UKR_SOV_provisional
						hidden_effect = { 
							set_party_name = { 
								ideology = communism 
								long_name = UKR_communist_party_long
								name = UKR_communist_party 
							}
						}
						size = 0.3 
						states = { 221 228 227 226 200 240 222} 
						keep_unit_leaders_trigger = {
							always = yes
						}
						keep_political_party_members = yes
						ROOT = {
							puppet = {
								target = PREV
								end_civil_wars = no
								end_wars = no
							}
						}
					}
					hidden_effect = {
						if = {
							limit = {
								has_government = democratic						
							}
							promote_character = UKR_symon_petliura
						}
					}	
				}
				ROOT = {
					declare_war_on = {
						target = UKR
						type = civil_war
					}
				}
			}
			else_if = {
				limit = {
					UKR = { has_civil_war = yes }
				}
				UKR = {
					random_other_country = {
						limit = {
							original_tag = UKR
							has_war_with = PREV
						}
						set_cosmetic_tag = UKR_SOV_provisional
						hidden_effect = { 
							set_party_name = { 
								ideology = communism 
								long_name = UKR_communist_party_long
								name = UKR_communist_party 
							}
							set_global_flag = ukrainian_civil_war
						}
						ROOT = {
							puppet = {
								target = PREV
								end_civil_wars = no
								end_wars = no
							}
							declare_war_on = {
								target = UKR
								type = civil_war
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						UKR = { has_government = ROOT }
						UKR = { is_in_faction_with = ROOT }
					}
				}
				set_autonomy = {
					target = UKR
					autonomy_state = autonomy_puppet
					end_civil_wars = no
					end_wars = no
				}
				hidden_effect = {
					UKR = {
						if = {
							limit = {
								has_government = communism
							}
							every_possible_country = {
								limit = {
									has_character = UKR_yuriy_pyatakov
								}
								UKR_yuriy_pyatakov = {
									set_nationality = PREV.PREV
								}
							}
							promote_character = UKR_yuriy_pyatakov
							set_party_name = {
								ideology = communism
								name = UKR_communist_party
								long_name = UKR_communist_party_long
							}
							set_cosmetic_tag = UKR_SOV
						}
					}
				}
				every_state = {
					limit = {
						is_owned_by = UKR
						is_core_of = ROOT
						NOT = {
							is_core_of = BLR
						}
					}
					transfer_state_to = ROOT
				}
				if = {
					limit = {
						BLR = {
							exists = yes
						}
					}
					every_state = {
						limit = {
							is_owned_by = UKR
							is_core_of = BLR
						}
						transfer_state_to = BLR
					}
				}
			}

			if = {
				limit = {
					WUK = {
						exists = yes
						NOT = { has_government = communism }
					}
				}
				random_other_country = {
					limit = {
						is_subject_of = ROOT
						original_tag = UKR
					}
					declare_war_on = {
						target = WUK
						type = take_core_state
					}
				}
			}
		}
	}
	SOV_soviet_georgia = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = GEO
			is_subject = no
			FROM = {
				has_civil_war = no
				is_in_faction = no
				has_capitulated = no
			}
			OR = {
				has_government = democratic
				has_government = communism
			}			
			OR = {
				is_neighbor_of = FROM
				any_country = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					is_neighbor_of = FROM
				}
			}
		}
		target_trigger = {
			FROM = {
				tag = GEO
				is_subject = no
			}
		}
		cost = 25
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}
				
			}
		}
		fire_only_once = yes
		days_remove = 7
		complete_effect = {
			if = {
				limit = {
					ENG = { has_guaranteed = FROM }
				}
				ENG = { country_event = ww1_georgia.7 }
			}
		}
		remove_effect = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = FROM
			}
		}
	}
	SOV_soviet_armenia = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = ARM
			FROM = {
				OR = {
					is_subject = no
					AND = {
						is_subject = yes
						OVERLORD = { has_country_flag = treaty_of_kars }
					}
				}
				is_in_faction = no
				has_civil_war = no
			}
			is_subject = no
			OR = {
				has_government = democratic
				has_government = communism
			}
			OR = {
				is_neighbor_of = FROM
				any_country = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					is_neighbor_of = FROM
				}
			}
		}
		target_trigger = {
			FROM = {
				tag = ARM
			}
		}
		cost = 25
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}
				
			}
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					FROM = { is_subject = no }
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = FROM
				}
				else = {
					effect_tooltip = {
						annex_country = {
							target = FROM
						}
					}
					hidden_effect = {
						if = {
							limit = {
								GEO = {
									is_subject_of = ROOT
									230 = { is_core_of = ROOT }
								}
							}
							GEO = {
								annex_country = {
									target = FROM
								}
							}
						}
						else_if = {
							limit = {
								FROM = {
									NOT = {
										is_neighbor_of = RUS
										is_neighbor_of = FROM
									}
								}
							}
							puppet = FROM
						}
						else = {
							annex_country = {
								target = FROM
							}
						}
					}
				}	
			}
		}
	}
	SOV_soviet_azerbaijan = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = AZR
			FROM = {
				is_subject = no
				has_civil_war = no
				is_in_faction = no
			}
			is_subject = no
			OR = {
				has_government = democratic
				has_government = communism
			}
			OR = {
				is_neighbor_of = FROM
				any_country = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					is_neighbor_of = FROM
				}
			}
		}
		target_trigger = {
			FROM = {
				tag = AZR
				is_subject = no
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}			
			}
		}
		complete_effect = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = FROM
			}
		}
	}
	SOV_soviet_mountain = {
		icon = GFX_decision_SOV_secure_the_administration
		fire_only_once = yes
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = MOU
			FROM = {
				has_capitulated = no
				has_civil_war = no
				NOT = {
					any_other_country = {
						has_guaranteed = PREV
					}
				}
			}
			is_subject = no
			OR = {
				has_government = democratic
				has_government = communism
			}
			OR = {
				is_neighbor_of = FROM
				any_country = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					is_neighbor_of = FROM
				}
			}
		}
		target_trigger = {
			FROM = {
				tag = MOU
				is_subject = no
			}
		}
		cost = 25
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}
			}
			modifier = {
				factor = 0
				any_other_country = {
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					has_guaranteed = FROM
				}
			}
		}
		complete_effect = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = FROM
			}
		}
	}
	SOV_soviet_khorezm = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = KHI
			FROM = {
				is_subject = no
				has_civil_war = no
			}
			is_subject = no
			OR = {
				controls_state = 587
				controls_state = 584
				controls_state = 585
				has_subject = KAZ
			}	
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		target_trigger = {
			FROM = {
				tag = KHI
				is_subject = no
			}
		}
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					KHI = {is_subject = no has_war = no exists = yes}
					
				}
				if = {
					limit = {
						KHI = {
							is_ai = yes
						}					
					}
					ROOT = {
						puppet = KHI
					}
					else = {
						KHI = {country_event = { id = generic.20 days = 1}}
					}
				}		    
			}
			if = {
				limit = {
					KHI = {exists = yes OR = {is_subject = yes has_war = yes} NOT={is_subject_of = ROOT}}
				}
				ROOT = {
					create_wargoal = {
						type = puppet_wargoal_focus
						target = KHI
					}
				}
			}
			hidden_effect = {
				KHI = {
					set_party_name = { 
						ideology = communism 
						long_name = KHI_communism_bolshevik_party_long
						name = KHI_communism_bolshevik_party 
					}
				}	
			}	
		}
	}
	SOV_soviet_bukhara = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			OR = {
				controls_state = 732
				controls_state = 584
				controls_state = 585
				has_subject = KHI
			}
			BUK = {
                has_capitulated = no
				has_civil_war = no
			}
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		target_trigger = {
			FROM = {
				tag = BUK
				is_subject = no
			}
		}
		cost = 25
		ai_will_do = {
			factor = 150
			modifier = {
				factor = 0
				FROM = {
					has_government = ROOT
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}
				
			}
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					BUK = { NOT = { has_government = ROOT is_in_faction_with = ROOT } }
				}
				if = {
					limit = {
						TRK = {
							is_faction_leader = yes
							has_war_with = ROOT
						}
					}
					TRK = {
						add_to_faction = BUK	
					}
				}		
				BUK = {
					set_capital = { state = 742}
					start_civil_war = { 
						ideology = ROOT 
						size = 0.6
						states = { 
     					    405
    					}
						capital = 405
						keep_unit_leaders_trigger = {
							always = yes
						}
						set_cosmetic_tag = SOV_puppet
					}
				}
				random_country = {
					limit = {
						original_tag = BUK
						has_government = ROOT
					}
					ROOT = {
						puppet = {
							target = PREV
							end_civil_wars = no
							end_wars = no
						}
						declare_war_on = {
							target = BUK
							type = civil_war
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						BUK = { has_government = ROOT }
						BUK = { is_in_faction_with = ROOT }
					}
				}
				ROOT = {
					puppet = BUK
				}
			}
			hidden_effect = {
				BUK = {
					set_party_name = { 
						ideology = communism 
						long_name = BUK_communism_bolshevik_party_long
						name = BUK_communism_bolshevik_party 
					}
				}	
			}	
		}
	}
	SOV_soviet_latvia = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = LAT
			OR = {
				LAT = { has_government = ROOT }
				LAT = { is_in_faction_with = ROOT }
			}
			is_subject = no
			FROM = {
				has_capitulated = no
				has_civil_war = no
			}
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		target_trigger = {
			FROM = {
				tag = LAT
				is_subject = no
			}
		}
		cost = 25
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				LAT = {
					is_in_faction_with = GER
					NOT = {
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}
				
			}
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					OR = {
						LAT = { has_government = ROOT }
						LAT = { is_in_faction_with = ROOT }
					}
				}
				ROOT = {
					puppet = LAT
				}
			}
		}
	}
	SOV_soviet_lithaunia = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = LIT
			OR = {
				LIT = { has_government = ROOT }
				LIT = { is_in_faction_with = ROOT }
			}
			is_subject = no
			FROM = {
				has_capitulated = no
				has_civil_war = no
			}
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		target_trigger = {
			FROM = {
				tag = LIT
				is_subject = no
			}
		}
		cost = 25
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				LIT = {						
					is_in_faction_with = GER
					NOT = {
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}
				
			}
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					OR = {
						LIT = { has_government = ROOT }
						LIT = { is_in_faction_with = ROOT }
					}
				}
				ROOT = {
					puppet = LIT
					LIT = {
						set_party_name = { 
							ideology = communism 
							long_name = LIT_communist_party_long
							name = LIT_communist_party 
						}
					}
				}
			}
		}
	}
	SOV_soviet_estonia = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			country_exists = EST
			OR = {
				EST = { has_government = ROOT }
				EST = { is_in_faction_with = ROOT }
			}
			is_subject = no
			FROM = {
				has_capitulated = no
				has_civil_war = no
			}
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		target_trigger = {
			FROM = {
				tag = EST
				is_subject = no
			}
		}
		cost = 25
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				EST = {
					is_in_faction_with = GER
					NOT = {
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						is_in_faction_with = ROOT
					}
					has_war = yes
				}
				
			}
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					OR = {
						EST = { has_government = ROOT }
						EST = { is_in_faction_with = ROOT }
					}
				}
				ROOT = {
					puppet = EST
				}
			}
		}
	}
	SOV_form_litbel = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {	
			hidden_trigger = {
				189 = {
					OR = {
						is_owned_and_controlled_by = ROOT
						any_other_country = {
							is_subject_of = ROOT
							owns_state = PREV
							has_full_control_of_state = PREV
						}
					}
				}
				11 = {
					OR = {
						is_owned_and_controlled_by = ROOT
						any_other_country = {
							is_subject_of = ROOT
							owns_state = PREV
							has_full_control_of_state = PREV
						}
					}
				}
				784 = {
					OR = {
						is_owned_and_controlled_by = ROOT
						any_other_country = {
							is_subject_of = ROOT
							owns_state = PREV
							has_full_control_of_state = PREV
						}
					}
				}
				773 = {
					OR = {
						is_owned_by = ROOT
						any_other_country = {
							is_subject_of = ROOT
							owns_state = PREV
							has_full_control_of_state = PREV
						}
					}
				}
				95 = {
					OR = {
						is_owned_and_controlled_by = ROOT
						any_other_country = {
							is_subject_of = ROOT
							owns_state = PREV
							has_full_control_of_state = PREV
						}
					}
				}
				206 = {
					OR = {
						is_owned_and_controlled_by = ROOT
						any_other_country = {
							is_subject_of = ROOT
							owns_state = PREV
							has_full_control_of_state = PREV
						}
					}
				}
				# 194 = {
				# 	OR = {
				# 		is_owned_and_controlled_by = ROOT
				# 		any_other_country = {
				# 			is_subject_of = ROOT
				# 			owns_state = PREV
				# 			has_full_control_of_state = PREV
				# 		}
				# 	}
				# }
				# 94 = {
				# 	OR = {
				# 		is_owned_and_controlled_by = ROOT
				# 		any_other_country = {
				# 			is_subject_of = ROOT
				# 			owns_state = PREV
				# 			has_full_control_of_state = PREV
				# 		}
				# 	}
				# }
				# 808 = {
				# 	OR = {
				# 		is_owned_and_controlled_by = ROOT
				# 		any_other_country = {
				# 			is_subject_of = ROOT
				# 			owns_state = PREV
				# 			has_full_control_of_state = PREV
				# 		}
				# 	}
				# }
			}
		}
		visible = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			OR = {
				has_government = democratic
				has_government = communism
			}
			LIT = {
				OR = {
					AND = {
						NOT = {
							has_cosmetic_tag = LITBEL
						}
						is_subject_of = ROOT
					}				
					exists = no			
				}
			}
			BLR = {
				OR = {
					is_subject_of = ROOT
					exists = no
				}
			}
		}
		cost = 25
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_completed_focus = SOV_USSR
			}
		}
		fire_only_once = yes
		complete_effect = {
			country_event = ww1_soviet.41
		}
	}
	SOV_form_transcaucasian_sfsr = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			231 = {
				OR = {
					is_owned_and_controlled_by = ROOT
					any_other_country = {
						OR = {
							original_tag = GEO
							original_tag = ARM
							original_tag = AZR
						}
						is_subject_of = ROOT
						owns_state = PREV
						has_full_control_of_state = PREV
					}
				}
			}
			230 = {
				OR = {
					is_owned_and_controlled_by = ROOT
					any_other_country = {
						OR = {
							original_tag = GEO
							original_tag = ARM
							original_tag = AZR
						}
						is_subject_of = ROOT
						owns_state = PREV
						has_full_control_of_state = PREV
					}
				}
			}
			818 = {
				OR = {
					is_owned_and_controlled_by = ROOT
					any_other_country = {
						OR = {
							original_tag = GEO
							original_tag = ARM
							original_tag = AZR
						}
						is_subject_of = ROOT
						owns_state = PREV
						has_full_control_of_state = PREV
					}
				}
			}
			823 = {
				OR = {
					is_owned_and_controlled_by = ROOT
					any_other_country = {
						OR = {
							original_tag = GEO
							original_tag = ARM
							original_tag = AZR
						}
						is_subject_of = ROOT
						owns_state = PREV
						has_full_control_of_state = PREV
					}
				}
			}
			229 = {
				OR = {
					is_owned_and_controlled_by = ROOT
					any_other_country = {
						OR = {
							original_tag = GEO
							original_tag = ARM
							original_tag = AZR
						}
						is_subject_of = ROOT
						owns_state = PREV
						has_full_control_of_state = PREV
					}
				}
			}
			938 = {
				OR = {
					is_owned_and_controlled_by = ROOT
					any_other_country = {
						OR = {
							original_tag = GEO
							original_tag = ARM
							original_tag = AZR
						}
						is_subject_of = ROOT
						owns_state = PREV
						has_full_control_of_state = PREV
					}
				}
			}
			939 = {
				OR = {
					is_owned_and_controlled_by = ROOT
					any_other_country = {
						OR = {
							original_tag = GEO
							original_tag = ARM
							original_tag = AZR
						}
						is_subject_of = ROOT
						owns_state = PREV
						has_full_control_of_state = PREV
					}
				}
			}
		}
		visible = {
			has_completed_focus = SOV_soviet_republics
			is_subject = no
			OR = {
				has_government = democratic
				has_government = communism
			}
			GEO = {
				OR = {
					is_subject_of = ROOT
					exists = no
				}
			}
			ARM = {
				OR = {
					is_subject_of = ROOT
					exists = no
				}
			}
			AZR = {
				OR = {
					is_subject_of = ROOT
					exists = no
				}
			}
		}
		cost = 25
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_completed_focus = SOV_USSR
			}
		}
		fire_only_once = yes
		complete_effect = {
			country_event = ww1_georgia.9
		}
	}
	SOV_soviet_crimea = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_capitulated = no
			OR = {
				is_neighbor_of = FROM
				any_allied_country = {
					is_neighbor_of = FROM
				}
				AND = {
					137 = { is_controlled_by_ROOT_or_ally = yes }
					955 = { is_controlled_by_ROOT_or_ally = yes }
				}
			}
		}
		visible = {
			has_completed_focus = SOV_soviet_republics
			has_global_flag = brest_litovsk
			GER = {
				NOT = {
					has_war_with = RUS
					has_war_with = ROOT
				}
			}
			is_subject = no
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		target_trigger = {
			FROM = {
				tag = CRI
				is_subject = no
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			base = 100
		}
		days_remove = 15
		war_with_target_on_remove = yes
		remove_effect = {
			if = {
				limit = {
					OR = {
						FROM = {
							OR = {
								has_government = ROOT
								has_government = communism
							}
						}
						AND = {
							137 = { is_controlled_by_ROOT_or_ally = yes }
							955 = { is_controlled_by_ROOT_or_ally = yes }
						}
					}
				}
				puppet = FROM
			}
			else = {
				declare_war_on = {
					target = FROM
					type = puppet_wargoal_focus
				}
			}
		}
	}
	SOV_soviet_persia = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			has_completed_focus = SOV_soviet_republics
			FROM = {
				has_civil_war = no
			}
			OR = {
				has_government = democratic
				has_government = communism
			}
			OR = {
				is_neighbor_of = FROM
				any_country = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					is_neighbor_of = FROM
				}
			}
		}
		visible = {
			is_subject = no
			FROM = {
				is_subject = no
				NOT = {
					has_government = communism
				}
			}
		}
		target_trigger = {
			FROM = {
				tag = PER
				is_subject = no
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				date > 1920.5.1
				OR = {
					has_war = no
					surrender_progress < 0.05
				}
			}
		}
		complete_effect = {
			FROM = {
				start_civil_war = {
					ideology = communism
					size = 0
					keep_political_party_members = yes
					keep_unit_leaders_trigger = { always = yes }
					states = { 420 }
					set_cosmetic_tag = PER_SOV
					PREV = {
						PER_mirza_kuchik_khan = {
							set_nationality = PREV.PREV
						}
					}
					promote_character = PER_mirza_kuchik_khan
				}
				hidden_effect = {
					add_ideas = standing_alone	
					set_state_controller = 420
					random_other_country = {
						limit = {
							has_government = communism
						}
						set_province_controller = 4609
						set_province_controller = 4901
						division_template = {
							name = "Jangalis"
							regiments = {
								militia = {
									x = 0
									y = 0
								}
								militia = {
									x = 0
									y = 1
								}
								militia = {
									x = 0
									y = 2
								}
								militia = {
									x = 1
									y = 0
								}
							}
						}
						420 = {
							create_unit = {
								division = "division_template = \"Jangalis\"	start_experience_factor = 0.1	start_equipment_factor = 0.6"
								owner = PREV
								allow_spawning_on_enemy_provs = yes
							}
							create_unit = {
								division = "division_template = \"Jangalis\"	start_experience_factor = 0.1	start_equipment_factor = 0.6"
								owner = PREV
								allow_spawning_on_enemy_provs = yes
							}
							create_unit = {
								division = "division_template = \"Jangalis\"	start_experience_factor = 0.1	start_equipment_factor = 0.6"
								owner = PREV
								allow_spawning_on_enemy_provs = yes
							}
						}
					}
				}
			}
		}
	}
	SOV_mongol_peoples_republic = {
		icon = GFX_decision_SOV_secure_the_administration
		available = {
			is_neighbor_of = FROM
			OR = {
				has_government = democratic
				has_government = communism
			}
		}
		visible = {
			has_completed_focus = SOV_soviet_republics
			FROM = {
				has_country_leader = {
					character = MON_roman_ungernsternberg
				}
				is_subject = no
			}
		}
		target_trigger = {
			FROM = { tag = MON }
		}
		cost = 20
		ai_will_do = {
			base = 10000
			modifier = {
				factor = 0
				OR = {
					date < 1922.2.16
					FROM = {
						is_in_faction = yes
					}
					any_country = {
						AND = {
							has_war_with = ROOT
							OR = {
								is_major = yes
								is_in_faction = yes
							}
						}
					}
					surrender_progress > 0.1
				}
			}
		}
		fire_only_once = yes
		days_remove = 15
		remove_effect  = {
			if = {
				limit = {
					FROM = {
						owns_state = 329
					}
					TAN = {
						OR = {
							exists = no
							is_subject_of = ROOT
						}
					}
				}
				FROM = {
					release = TAN
				}
				puppet = TAN
			}
			if = {
				limit = {
					FROM = {
						is_in_faction = no
						has_war = no
						is_ai = yes
					}
				}
				puppet = FROM
				hidden_effect = {
					FROM = {
					    drop_cosmetic_tag = yes
						retire_character = MON_roman_ungernsternberg
						set_party_name = { 
						    ideology = fascism 
						    long_name = MON_fascism_party 
						    name = MON_fascism_party 
						}						
					}
					set_province_name = {
						id = 4801
						name = ULANBATOR_PROV
					}
					RUS = {
						retire_character = RUS_roman_ungern_sternberg
					}
				}	
				else = {
					create_wargoal = {
						target = FROM
						type = puppet_wargoal_focus
					}
				}
			}
		}
	}
}
SOV_red_terror_category = {
	SOV_train_of_trotsky = {
		icon = GFX_decision_SOV_left_opposition_state
		fire_only_once = yes
		allowed = {
			original_tag = RUS 
		}
		available = {
			has_russian_civil_war = yes
		}
		visible = {
			tag = SOV
			has_completed_focus = SOV_red_terror
			NOT = {
				has_country_flag = SOV_train_of_trotsky
			}
		}
		days_remove = 90
		days_re_enable = 10
		cost = 75
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			set_country_flag = {
				flag = SOV_train_of_trotsky
				days = 100
				value = 1
			}
		}
		target_trigger = {
			FROM = {
				is_russian_tag = yes
				has_war_with = ROOT
				is_neighbor_of = ROOT
			}
		}
		targeted_modifier = {
			tag = FROM
			attack_bonus_against = 0.1
			defense_bonus_against = 0.1
		}
		ai_will_do = {
			factor = 1
		}
	}
	SOV_crush_the_peasant_uprising = {
		icon = GFX_decision_POL_looming_peasants_strike
		allowed = {
			original_tag = RUS 
		}
		available = {
			has_idea = SOV_idea_peasant_uprising
		}
		days_remove = 30
		days_re_enable = 10
		cost = 50
		fire_only_once = no
		visible = {
			tag = SOV
			has_completed_focus = SOV_red_terror
		}
		remove_effect = {
			add_stability = -0.02
			remove_ideas = SOV_idea_peasant_uprising
		}
		ai_will_do = {
			factor = 100
		}
	}
	SOV_crush_the_soldier_rebellion = {
		icon = GFX_decision_oppression
		allowed = {
			original_tag = RUS 
		}
		available = {
			has_idea = SOV_idea_soldier_rebellion
			has_war_support > 0.1
		}
		days_remove = 30
		days_re_enable = 10
		cost = 50
		fire_only_once = no
		visible = {
			tag = SOV
			has_completed_focus = SOV_red_terror
		}
		remove_effect = {
			add_war_support = -0.1
			remove_ideas = SOV_idea_soldier_rebellion
		}
		ai_will_do = {
			factor = 100
		}
	}
	SOV_crush_the_sailor_mutiny = {
		icon = GFX_decision_oppression
		allowed = {
			original_tag = RUS 
		}
		available = {
			has_idea = SOV_idea_sailor_mutiny
			has_war_support > 0.1
		}
		days_remove = 30
		days_re_enable = 10
		cost = 50
		fire_only_once = no
		visible = {
			tag = SOV
			has_completed_focus = SOV_red_terror
			NOT = {
				has_global_flag = kronstadt_rebellion
			}
		}
		remove_effect = {
			add_war_support = -0.1
			remove_ideas = SOV_idea_sailor_mutiny
			set_global_flag = kronstadt_rebellion
			hidden_effect = {
				news_event = ww1_soviet.25
			}
		}
		ai_will_do = {
			factor = 100
		}
	}	
	SOV_expel_opposition_intelligentsia = {
		icon = GFX_decision_eng_blackshirt_march
		allowed = {
			original_tag = RUS 
		}
		available = {
			has_idea = SOV_idea_fight_against_dissent
		}
		days_remove = 60
		cost = 150
		fire_only_once = yes
		visible = {
			tag = SOV
			has_completed_focus = SOV_red_terror
		}
		remove_effect = {
			remove_ideas = SOV_idea_fight_against_dissent
			news_event = { id = ww1_soviet.10 }
		}
		ai_will_do = {
			factor = 100
		}
	}
	SOV_execute_counterrevolutionaries = {
		icon = GFX_decision_SOV_the_military_conspiracy
		allowed = {
			original_tag = RUS 
		}
		available = {
			has_russian_civil_war = yes
		}
		days_remove = 30
		days_re_enable = 30
		cost = 50
		fire_only_once = no
		visible = {
			tag = SOV
			has_completed_focus = SOV_red_terror
			NOT = {
				has_country_flag = SOV_execute_counterrevolutionaries
			}
		}
		target_trigger = {
			FROM = {
				is_russian_tag = yes
				has_war_with = ROOT
				is_neighbor_of = ROOT
			}
		}
		complete_effect = {
			set_country_flag = {
				flag = SOV_execute_counterrevolutionaries
				days = 60
				value = 1
			}
		}
		remove_effect = {
			FROM = { add_stability = -0.05 }
		}
		ai_will_do = {
			factor = 0
		}
	}
	SOV_socialist_propaganda = {
		icon = GFX_decision_SOV_stalinist_state
		allowed = {
			original_tag = RUS 
		}
		available = {
			any_enemy_country = {
				original_tag = RUS 
			}
		}
		days_remove = 60
		days_re_enable = 10
		cost = 25
		fire_only_once = no
		visible = {
			tag = SOV
			has_completed_focus = SOV_red_terror
		}
		modifier = {
			communism_drift = 0.05
		}
		ai_will_do = {
			factor = 0
		}
	}
	SOV_factory_expropriation = {
		icon = GFX_decision_generic_factory
		allowed = {
			original_tag = RUS 
		}
		available = {
			has_war_with = FROM
			has_completed_focus = SOV_nationalization
			FROM = {
				num_of_civilian_factories > 1
			}
		}
		days_remove = 90
		days_re_enable = 10
		cost = 75
		fire_only_once = no
		visible = {
			tag = SOV
			has_completed_focus = SOV_red_terror
			NOT = {
				has_country_flag = SOV_factory_expropriation
			}
		}
		target_trigger = {
			FROM = {
				original_tag = RUS
				has_war_with = ROOT
			}
		}
		complete_effect = {
			set_country_flag = {
				flag = SOV_factory_expropriation
				days = 100
				value = 1
			}
		}
		remove_effect = {
			random_owned_state = {
				limit = {
					free_building_slots = { building = industrial_complex size > 0 include_locked = no } 
					is_in_home_area = yes 
				}
				add_building_construction = { type = industrial_complex level = 1 instant_build = yes } 
			}
			FROM = {
				random_owned_state = {
					limit = {
						industrial_complex > 0
						is_in_home_area = yes 
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
			    }
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
}
foreign_politics = {
	SOV_play_makhnovshchina = {
		icon = GFX_decision_generic_prepare_civil_war
        allowed = {
			OR = {
				original_tag = UKR
				original_tag = RUS 
			}
		}
		target_trigger = {
			FROM = {
				tag = VLN
			}
		}	
		visible = {
			OR = {
				original_tag = UKR
				tag = SOV
			}
			is_ai = no
			VLN = {
				is_ai = yes
			}
		}
		fire_only_once = yes
		complete_effect = {
			VLN = { change_tag_from = ROOT }
		}
	}
}
operations = {
	SOV_estonian_offensive_mission = {
		icon = revolt
		allowed = {
			OR = {
				original_tag = RUS 
				original_tag = EST
			}
		}
		visible = {
			OR = {
				tag = SOV
				original_tag = EST
			}
			OR = {
				has_war_with = SOV
				has_war_with = EST
			}
		}		
		available = {
			EST = {
				OR = {
					NOT = { has_war_with = SOV }
					is_subject_of = SOV
					exists = no
					has_capitulated = yes
				}
			}
		}		
		activation = {
			SOV = { has_war_with = EST }
			EST = { NOT = { has_government = communism } }
		}		
		timeout_effect = {
			every_country = {
				limit = {
					has_war_with = EST
					OR = {
						tag = PREV
						is_in_faction_with = PREV
						is_subject_of = PREV
					}
				}
				white_peace = EST
				set_truce = {
					target = EST
					days = 365
				}
			}
			every_state = {
				limit = {
					is_core_of = EST
					owner = {
						is_russian_tag = yes
					}
				}
				transfer_state_to = EST
			}
			EST = {
				if = {
					limit = {
						is_in_faction = yes
					}
					leave_faction = yes
				}
				set_rule = {
					can_join_factions = no
				}
				every_owned_state = {
					limit = {
						region = 37
					}
					remove_russian_cores = yes
					remove_russian_claims = yes
				}
			}
		}		
		fire_only_once = yes
		days_mission_timeout = 430
		is_good = no
	}
	SOV_latvian_offensive_mission = {
		icon = revolt
		allowed = {
			OR = {
				original_tag = RUS 
				original_tag = LAT
				original_tag = UBD
			}
		}
		visible = {
			OR = {
				tag = SOV 
				original_tag = LAT
				original_tag = UBD
			}
			OR = {
				has_war_with = SOV
				has_war_with = LAT
			}
		}		
		available = {
			LAT = {
				OR = {
					NOT = { has_war_with = SOV }
					is_subject_of = SOV
					exists = no
					has_capitulated = yes
				}
			}
			if = {
				limit = {
					country_exists = UBD
				}
				UBD = {
					OR = {
						NOT = { has_war_with = SOV }
						is_subject_of = SOV
						exists = no
						has_capitulated = yes
					}
				}
			}
		}		
		activation = {
			SOV = { has_war_with = LAT }
			LAT = { NOT = { has_government = communism } }
		}		
		timeout_effect = {
			# restore latvia in case of their capitulation
			if = {
				limit = {
					LAT = {
						OR = {
							has_government = communism
							is_subject_of = SOV
							is_in_faction_with = SOV
						}
					}
				}
				LAT = {
					drop_cosmetic_tag = yes
					set_politics = {
						ruling_party = democratic
						elections_allowed = yes
					}
					set_rule = {
						can_join_factions = yes
					}
					set_popularities = {
						democratic = 50
						neutrality = 30
						fascism = 0
						communism = 20
					}
				}
			}
			every_country = {
				limit = {
					has_war_with = LAT
					OR = {
						tag = SOV
						is_in_faction_with = SOV
						is_subject_of = SOV
					}
				}
				white_peace = LAT
				set_truce = {
					target = LAT
					days = 365
				}
			}
			every_state = {
				limit = {
					is_core_of = LAT
					owner = {
						is_russian_tag = yes
					}
				}
				transfer_state_to = LAT
			}
			LAT = {
				if = {
					limit = {
						is_in_faction = yes
					}
					leave_faction = yes
				}
				set_rule = {
					can_join_factions = no
				}
				every_owned_state = {
					limit = {
						region = 37
					}
					remove_russian_cores = yes
					remove_russian_claims = yes
				}
			}
			hidden_effect = {
				every_state = {
					limit = {
						state = 96
						OR = {
							is_owned_by = RUS
							is_owned_by = ROOT
						}
					}
					transfer_state_to = LAT
				}
			}

			# baltic germans
			every_country = {
				limit = {
					has_war_with = UBD
					OR = {
						tag = SOV
						is_in_faction_with = SOV
						is_subject_of = SOV
					}
				}
				white_peace = UBD
				set_truce = {
					target = UBD
					days = 365
				}
			}
			every_state = {
				limit = {
					is_core_of = UBD
					owner = {
						is_russian_tag = yes
					}
				}
				transfer_state_to = UBD
			}
			UBD = {
				if = {
					limit = {
						is_in_faction = yes
					}
					leave_faction = yes
				}
				set_rule = {
					can_join_factions = no
				}
				every_owned_state = {
					limit = {
						region = 37
					}
					remove_russian_cores = yes
					remove_russian_claims = yes
				}
			}
		}		
		fire_only_once = yes
		days_mission_timeout = 600
		is_good = no
	}
	SOV_lithuanian_offensive_mission = {
		icon = revolt
		allowed = {
			OR = {
				original_tag = RUS 
				original_tag = LIT
			}
		}
		visible = {
			OR = {
				tag = SOV
				original_tag = LIT
			}
			OR = {
				has_war_with = SOV
				has_war_with = LIT
			}
		}		
		available = {
			LIT = {
				OR = {
					NOT = { has_war_with = SOV }
					is_subject_of = SOV
					exists = no
					has_capitulated = yes
				}
			}
		}		
		activation = {
			SOV = { has_war_with = LIT }
			LIT = {
				is_subject = no
				NOT = { has_government = communism }
			}
		}		
		timeout_effect = {
			every_country = {
				limit = {
					has_war_with = LIT
					OR = {
						tag = PREV
						is_in_faction_with = PREV
						is_subject_of = PREV
					}
				}
				white_peace = LIT
				set_truce = {
					target = LIT
					days = 365
				}
			}
			every_state = {
				limit = {
					is_core_of = LIT
					owner = {
						is_russian_tag = yes
					}
				}
				transfer_state_to = LIT
			}
			LIT = {
				if = {
					limit = {
						is_in_faction = yes
					}
					leave_faction = yes
				}
				set_rule = {
					can_join_factions = no
				}
				every_owned_state = {
					limit = {
						region = 37
					}
					remove_russian_cores = yes
					remove_russian_claims = yes
				}
			}
		}		
		fire_only_once = yes
		days_mission_timeout = 260
		is_good = no
	}
}
